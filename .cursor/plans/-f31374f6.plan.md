<!-- f31374f6-3fd6-45bb-9796-b6ce6e3ef60b 1c297b2f-57c9-4912-9c79-ee13193f57a4 -->
# План исправления отступов в test_notification_buttons_flow.py

## Проблемы с отступами

### 1. Функция `test_show_key_button` (строки 633-730)

**Проблема 1:** Код внутри функции `show_key_handler_test` (строки 633-703) имеет лишние 4 пробела

- Текущий отступ: 28 пробелов (7 уровней)
- Правильный отступ: 24 пробела (6 уровней - 4 пробела от начала функции)

**Проблема 2:** Блоки `with allure.step` после функции (строки 705-730) имеют неправильный отступ

- Текущий отступ: 24 пробела (6 уровней)
- Правильный отступ: 16 пробелов (4 уровня - на уровне блока `with allure.step` на строке 630)

### 2. Функция `test_back_to_menu_button` (строки 794-836)

**Проблема:** Блок `with allure.step` на строке 794 и все вложенные блоки имеют неправильные отступы

- Строка 794: текущий отступ 12 пробелов, правильный 8 пробелов
- Строки 809, 814, 817: текущий отступ 16 пробелов, правильный 12 пробелов

## Шаги исправления

1. **Исправить отступы в `test_show_key_button`:**

- Строки 633-703: уменьшить отступ на 4 пробела (с 28 до 24)
- Строки 705-730: уменьшить отступ на 8 пробелов (с 24 до 16)

2. **Исправить отступы в `test_back_to_menu_button`:**

- Строка 794: уменьшить отступ на 4 пробела (с 12 до 8)
- Строки 796-807: уменьшить отступ на 4 пробела (с 20 до 16 для функции, с 24 до 20 для тела функции)
- Строки 809-836: уменьшить отступ на 4 пробела (с 16 до 12)

3. **Проверить сборку тестов:**

- Выполнить `docker compose exec monitoring pytest --collect-only -q`
- Убедиться, что нет ошибок ERROR

4. **Запустить полный тест:**

- Выполнить `docker compose exec monitoring pytest -v --tb=line 2>&1 | Tee-Object -FilePath (Join-Path (Resolve-Path ./logs) "pytest_final_$(Get-Date -Format 'yyyyMMdd_HHmmss').log")`
- Проверить логирование копирования БД
- Проверить, что тесты используют `temp_db.db`

5. **Исправить ошибки тестов (если есть):**

- Проанализировать результаты тестов
- Исправить любые ошибки, связанные с использованием БД

### To-dos

- [ ] Исправить отступы в функции test_show_key_button (строки 633-730): уменьшить отступы кода внутри show_key_handler_test на 4 пробела и блоков allure.step на 8 пробелов
- [ ] Исправить отступы в функции test_back_to_menu_button (строки 794-836): уменьшить отступы всех блоков на 4 пробела
- [ ] Проверить сборку тестов командой pytest --collect-only -q и убедиться, что нет ошибок ERROR
- [ ] Запустить полный тест с логированием и проверить работу системы копирования БД
- [ ] Проанализировать результаты тестов и исправить любые ошибки, связанные с использованием БД