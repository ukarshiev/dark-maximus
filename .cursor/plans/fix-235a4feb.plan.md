<!-- 235a4feb-7a17-4138-af6d-50a4f698f8b8 12ee22b1-4c74-4b80-824e-08b7e252e3c8 -->
# План работ

1. Проверка источника сообщения

- Изучить `process_successful_payment` в `src/shop_bot/bot/handlers.py` и определить, почему условие на `payment_method` не срабатывает.

2. Нормализация способа оплаты

- В `process_successful_payment` применить нормализацию значения `payment_method`, чтобы ветка для автопродления гарантированно срабатывала и сообщение с ключом не отправлялось.

3. Исправление текста успешного продления

- Обновить `get_purchase_success_text` в `src/shop_bot/config.py`, чтобы для продления выводился текст про продление, а не "готов".

4. Ручная проверка

- Просмотреть сценарий автопродления в коде, убедиться, что после правок пользователю остается только уведомление о списании.

5. Обновление документации и версий

- Внести запись в `CHANGELOG.md` и обновить версию в `pyproject.toml`.

### To-dos

- [ ] Проверить в коде обработку автопродления и определить причину отправки сообщения о готовности ключа
- [ ] Нормализовать значение payment_method в process_successful_payment и скорректировать текст сообщений при продлении
- [ ] Обновить CHANGELOG.md и версию в pyproject.toml после правок