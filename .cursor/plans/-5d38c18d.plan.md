<!-- 5d38c18d-d195-4db5-a878-c33afaec20a5 59792995-ce2a-4036-914c-52180ecc49a3 -->
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–ª—é—á–µ–π –≤ –º–µ–Ω—é "–í–∞—à–∏ –∫–ª—é—á–∏:"

## –¶–µ–ª—å

–ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–ª—é—á–µ–π –≤ –º–µ–Ω—é —Å —Ç–µ–∫—É—â–µ–≥–æ:

`‚úÖ –ö–ª—é—á #3 (–ü—Ä–æ–±–Ω—ã–π) (–§–∏–Ω–ª—è–Ω–¥–∏—è 1 Test) (–¥–æ 17.11.2025)`

–ù–∞ –Ω–æ–≤—ã–π –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç:

`‚úÖ #3 TRIAL - üá´-–ë–∞–∑–æ–≤—ã–π-299‚ÇΩ –¥–æ 17.11.25`

## –ò–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –§–∞–π–ª: `src/shop_bot/bot/keyboards.py`

   - –§—É–Ω–∫—Ü–∏—è: `create_keys_management_keyboard` (—Å—Ç—Ä–æ–∫–∏ 389-424)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ª–æ–≥–∏–∫–µ:**

   - –£–±—Ä–∞—Ç—å —Å–ª–æ–≤–æ "–ö–ª—é—á" –∏–∑ —Ç–µ–∫—Å—Ç–∞ –∫–Ω–æ–ø–∫–∏
   - –ò–∑–º–µ–Ω–∏—Ç—å `trial_suffix` —Å `" (–ü—Ä–æ–±–Ω—ã–π)"` –Ω–∞ `" TRIAL"` (–±–µ–∑ —Å–∫–æ–±–æ–∫)
   - –ó–∞–º–µ–Ω–∏—Ç—å –ø–æ–ª–Ω–æ–µ `host_name` –Ω–∞ –ø–µ—Ä–≤—ã–π —Å–∏–º–≤–æ–ª (`host_flag`) –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–ª–∞–≥–∞
   - –î–æ–±–∞–≤–∏—Ç—å `plan_name` –∏ `price` –≤ —Ñ–æ—Ä–º–∞—Ç —á–µ—Ä–µ–∑ –¥–µ—Ñ–∏—Å
   - –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã —Å `'%d.%m.%Y'` –Ω–∞ `'%d.%m.%y'` (–≥–æ–¥ –∏–∑ –¥–≤—É—Ö —Å–∏–º–≤–æ–ª–æ–≤)
   - –£–±—Ä–∞—Ç—å —Å–∫–æ–±–∫–∏ –≤–æ–∫—Ä—É–≥ –¥–∞—Ç—ã (–∑–∞–º–µ–Ω–∏—Ç—å `(–¥–æ {–¥–∞—Ç–∞})` –Ω–∞ `–¥–æ {–¥–∞—Ç–∞}`)

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö:**

   - –ï—Å–ª–∏ `plan_name` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (None –∏–ª–∏ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞) - –Ω–µ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ —Å—Ç—Ä–æ–∫—É
   - –ï—Å–ª–∏ `price` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (None) - –Ω–µ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ —Å—Ç—Ä–æ–∫—É
   - –ï—Å–ª–∏ `host_name` –ø—É—Å—Ç–æ–π - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 'üåê' –∫–∞–∫ fallback
   - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω—ã: —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞ –±–µ–∑ –∫–æ–ø–µ–µ–∫ (`{int(price)}‚ÇΩ`), –¥—Ä–æ–±–Ω—ã–µ —Å –¥–≤—É–º—è –∑–Ω–∞–∫–∞–º–∏ (`{price:.2f}‚ÇΩ`)

**–ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç —Å—Ç—Ä–æ–∫–∏:**

   ```python
   button_text = f"{status_icon} #{key_number}{trial_suffix} - {tariff_info} –¥–æ {expiry_date_str}"
   ```

–ì–¥–µ `tariff_info` —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫: `host_flag-plan_name-price‚ÇΩ` (—Ç–æ–ª—å–∫–æ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —á–∞—Å—Ç–∏)

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π

1. **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è** - —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –ø—Ä–µ–∂–Ω–µ–π, —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ª–æ–≥–∏–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ None –∑–Ω–∞—á–µ–Ω–∏–π** - –≤—Å–µ –ø–æ–ª—è –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –≤ —Å—Ç—Ä–æ–∫—É
3. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Å—Ç–∞—Ä—ã–µ –∫–ª—é—á–∏ –±–µ–∑ plan_name/price –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. **Fallback –¥–ª—è host_name** - –µ—Å–ª–∏ host_name –ø—É—Å—Ç–æ–π, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —ç–º–æ–¥–∑–∏ 'üåê'
5. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ callback_data** - –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è, –æ—Å—Ç–∞—ë—Ç—Å—è `f"show_key_{key['key_id']}"`

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–ª—é—á–µ–π —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (host, plan_name, price)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–ª—é—á–µ–π –±–µ–∑ plan_name
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–ª—é—á–µ–π –±–µ–∑ price
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–ª—é—á–µ–π –±–µ–∑ plan_name –∏ price
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–±–Ω—ã—Ö –∫–ª—é—á–µ–π (TRIAL)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç—ë–∫—à–∏—Ö –∫–ª—é—á–µ–π (‚ùå)
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã callback –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏

## –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã

- `src/shop_bot/bot/keyboards.py` - –æ—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ (—Ñ—É–Ω–∫—Ü–∏—è `create_keys_management_keyboard`)

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è –∏–∑ –ë–î: `host_name`, `plan_name`, `price`, `is_trial`, `expiry_date`, `status`
- –í—Å–µ –ø–æ–ª—è —É–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `get_user_keys()` –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `vpn_keys`

### To-dos

- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é create_keys_management_keyboard –≤ keyboards.py: –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç —Ç–µ–∫—Å—Ç–∞ –∫–Ω–æ–ø–æ–∫, –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É plan_name –∏ price, –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã –∏ trial_suffix
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–ª—é—á–µ–π —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è–º–∏ –¥–∞–Ω–Ω—ã—Ö (—Å/–±–µ–∑ plan_name, —Å/–±–µ–∑ price, –ø—Ä–æ–±–Ω—ã–µ, –∏—Å—Ç—ë–∫—à–∏–µ)