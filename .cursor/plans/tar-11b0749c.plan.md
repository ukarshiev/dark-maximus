<!-- 11b0749c-52bb-44e3-9648-af058ace5d71 198c234e-3311-4cde-8193-eef3649393ed -->
# Отправка уведомления пользователю 6044240344

Дата: 13.11.2025 06:20
Version: 1.0

1. Проанализировать доступные данные пользователя 6044240344 через `shop_bot.data_manager.database` (поиск активного ключа, его срока и идентификатора) для подготовки параметров `key_id`, `time_left_hours`, `expiry_date`.
2. Реализовать скрипт `tests/test_send_plan_unavailable_notice.py`, который:

- настраивает логирование в `logs/test_send_plan_unavailable_notice.log`;
- получает токен бота и создаёт экземпляр `Bot` aiogram;
- извлекает данные ключа пользователя, рассчитывает `time_left_hours` и подготавливает `expiry_date`;
- вызывает `send_plan_unavailable_notice` с уникальным маркером, чтобы уведомление ушло независимо от прошлых отправок, и корректно закрывает сессию бота.

3. Запустить скрипт и проверить успешное выполнение (ошибок в логе нет, `send_plan_unavailable_notice` завершается без исключений).

### To-dos

- [ ] Проверить в базе ключи пользователя 6044240344 и подготовить параметры для отправки уведомления
- [ ] Создать скрипт tests/test_send_plan_unavailable_notice.py для отправки уведомления
- [ ] Запустить скрипт и убедиться, что уведомление отправлено без ошибок