# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Timezone

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `tzdata>=2025.2` –≤ pyproject.toml
2. ‚úÖ –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π `set_user_timezone` –∏ `get_user_timezone`
3. ‚úÖ Feature flag `feature_timezone_enabled` –≤–∫–ª—é—á—ë–Ω
4. ‚úÖ –§—É–Ω–∫—Ü–∏—è `set_user_timezone` —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç bool

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ —Å–º–µ–Ω—ã —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ –Ω–∞ UTC+12 (–û–∫–ª–µ–Ω–¥), –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª—é—á–µ –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ UTC+3:

```
‚ûï –ü—Ä–∏–æ–±—Ä–µ—Ç—ë–Ω: 07.11.2025 –≤ 10:17 (UTC+3)
‚è≥ –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –¥–æ: 07.11.2025 –≤ 11:17 (UTC+3)
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
```
‚ûï –ü—Ä–∏–æ–±—Ä–µ—Ç—ë–Ω: 07.11.2025 –≤ 19:17 (UTC+12)
‚è≥ –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –¥–æ: 07.11.2025 –≤ 20:17 (UTC+12)
```

## –ü—Ä–∏—á–∏–Ω–∞

1. –ù–∞ Windows –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª –ø–∞–∫–µ—Ç `tzdata`, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å timezone
2. –í `database.py` –±—ã–ª–∏ –¥—É–±–ª–∏–∫–∞—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π `set_user_timezone` –∏ `get_user_timezone`

## –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞

```powershell
npx nx stop bot
npx nx serve bot
```

### 2. –í Telegram –±–æ—Ç–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å: **–ú–µ–Ω—é** ‚Üí **üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å**
2. –ù–∞–∂–º–∏—Ç–µ **üåç –ò–∑–º–µ–Ω–∏—Ç—å —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å**
3. –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, **Pacific/Auckland UTC+12**)
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤—ã–±–æ—Ä
5. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –ø—Ä–æ—Ñ–∏–ª—å ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å –∏–∑–º–µ–Ω–∏–ª—Å—è
6. –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–π –∫–ª—é—á: **–ú–µ–Ω—é** ‚Üí **üîë –ú–æ–∏ –∫–ª—é—á–∏** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –∫–ª—é—á
7. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–∞—Ç—ã —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ –î–∞—Ç—ã "–ü—Ä–∏–æ–±—Ä–µ—Ç—ë–Ω" –∏ "–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –¥–æ" –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ
‚úÖ –í—Ä–µ–º—è –¥–æ–ª–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è (—Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É UTC+3 –∏ UTC+12 = 9 —á–∞—Å–æ–≤)
‚úÖ –í —Å–∫–æ–±–∫–∞—Ö –¥–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π UTC offset

## –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
python tests/test_timezone_change.py
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ Moscow TZ: `07.11.2025 –≤ 10:17 (UTC+3)`
- ‚úÖ Auckland TZ: `07.11.2025 –≤ 20:17 (UTC+13)` (–ª–µ—Ç–Ω–µ–µ –≤—Ä–µ–º—è)
- ‚úÖ –†–∞–∑–Ω–∏—Ü–∞ 10 —á–∞—Å–æ–≤ (–ª–µ—Ç–Ω–µ–µ –≤—Ä–µ–º—è –≤ –ù–æ–≤–æ–π –ó–µ–ª–∞–Ω–¥–∏–∏)

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `pyproject.toml` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å tzdata
- `src/shop_bot/data_manager/database.py` ‚Äî —É–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π
- `CHANGELOG.md` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–ø–∏—Å—å –æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏

