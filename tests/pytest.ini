[pytest]
# Пути для поиска тестов
testpaths = tests

# Паттерны для поиска тестовых файлов
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Исключить одноразовые скрипты из ad-hoc
norecursedirs = ad-hoc

# Маркеры для категоризации тестов (должны быть определены до addopts)
markers =
    unit: Unit tests (70% coverage)
    integration: Integration tests (20% coverage)
    e2e: End-to-end tests (10% coverage)
    database: Database tests
    bot: Bot tests
    slow: Slow running tests
    asyncio: Async tests

# Опции pytest
addopts = 
    -v
    --tb=short
    --strict-markers
    -W default::Warning
    --alluredir=allure-results
    --ignore=tests/ad-hoc

# Настройки для покрытия кода (pytest-cov)
# Будет активировано после установки pytest-cov
# addopts = 
#     --cov=src
#     --cov-report=html
#     --cov-report=term-missing

# Настройки asyncio для async тестов
asyncio_mode = auto

