# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π –≤ Git –∏ PowerShell

**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ä–µ–¥–∞–∫—Ü–∏–∏:** 14.10.2025

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å Git –≤ PowerShell –Ω–∞ Windows –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Ä—É—Å—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ –∫–æ–º–º–∏—Ç–∞—Ö. –ö–æ–º–º–∏—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –∏—Å–∫–∞–∂–µ–Ω–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `–†—õ–†¬±–†–Ö–†—ï–†–Ü–†¬ª–†¬µ–†–Ö` –≤–º–µ—Å—Ç–æ `–û–±–Ω–æ–≤–ª–µ–Ω`).

## –ü—Ä–∏—á–∏–Ω–∞

–ü—Ä–æ–±–ª–µ–º–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∏–∑-–∑–∞ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∫–æ–¥–∏—Ä–æ–≤–æ–∫:
- Git –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Windows-1251 (CP1251)
- PowerShell –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–¥–∏—Ä–æ–≤–∫—É –∫–æ–Ω—Å–æ–ª–∏ Windows
- GitHub –∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –æ–∂–∏–¥–∞—é—Ç UTF-8

## –†–µ—à–µ–Ω–∏–µ

### 1. –ì–ª–æ–±–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Git (—É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Git —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –≥–ª–æ–±–∞–ª—å–Ω–æ:

```powershell
git config --global core.quotepath false
git config --global i18n.commitencoding utf-8
git config --global i18n.logoutputencoding utf-8
git config --global gui.encoding utf-8
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PowerShell –ø—Ä–æ—Ñ–∏–ª—è (—É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)

–í –ø—Ä–æ—Ñ–∏–ª—å PowerShell –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ UTF-8 –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞.

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –º–æ–∂–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π:
```powershell
Get-Content $PROFILE
```

### 3. –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–¥–∏—Ä–æ–≤–∫—É –≤—Ä—É—á–Ω—É—é –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏:

```powershell
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PowerShell –Ω–∞ UTF-8
[Console]::OutputEncoding = [System.Text.Encoding]::UTF8
[Console]::InputEncoding = [System.Text.Encoding]::UTF8
chcp 65001

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
$env:LESSCHARSET = 'utf-8'
```

### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç `scripts/setup-encoding.ps1` –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∏:

```powershell
.\scripts\setup-encoding.ps1
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Git:

```powershell
git config --list | Select-String -Pattern "encoding|quotepath"
```

–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:
```
core.quotepath=false
i18n.commitencoding=utf-8
i18n.logoutputencoding=utf-8
gui.encoding=utf-8
```

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∫–æ–º–º–∏—Ç–æ–≤

–ï—Å–ª–∏ –≤ –∏—Å—Ç–æ—Ä–∏–∏ Git —É–∂–µ –µ—Å—Ç—å –∫–æ–º–º–∏—Ç—ã —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π, –∏—Ö –º–æ–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –∫–æ–º–º–∏—Ç–æ–≤

```powershell
# –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –∫–æ–º–º–∏—Ç–∞
git rebase -i HEAD~3

# –í –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–º–∏—Ç–∞ –∏–∑–º–µ–Ω–∏—Ç–µ:
# pick -> reword

# Git –ø–æ–ø—Ä–æ—Å–∏—Ç –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞
# –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:
git push --force-with-lease
```

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï:** Force push –∏–∑–º–µ–Ω—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é Git. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –∏–ª–∏ –ø–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è —Å –∫–æ–º–∞–Ω–¥–æ–π.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å

–ï—Å–ª–∏ –∫–æ–º–º–∏—Ç—ã —É–∂–µ –∑–∞–ø—É—à–µ–Ω—ã –≤ –ø—É–±–ª–∏—á–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, –ª—É—á—à–µ –æ—Å—Ç–∞–≤–∏—Ç—å –∏—Ö –∫–∞–∫ –µ—Å—Ç—å, —á—Ç–æ–±—ã –Ω–µ –Ω–∞—Ä—É—à–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é.

## –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –≤ –±—É–¥—É—â–µ–º

### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ UTF-8 –≤–µ–∑–¥–µ

- –í—Å–µ —Ñ–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ UTF-8
- –†–µ–¥–∞–∫—Ç–æ—Ä—ã –∫–æ–¥–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞ UTF-8
- –¢–µ—Ä–º–∏–Ω–∞–ª –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UTF-8

### 2. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–æ–¥–∏—Ä–æ–≤–∫—É –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

```powershell
# –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
git diff

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∫–æ–º–º–∏—Ç–æ–≤
git log --oneline -5
```

### 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

- **GitHub Desktop**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç UTF-8
- **VS Code**: –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –Ω–∞ UTF-8 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **PowerShell**: —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```powershell
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–¥–∏—Ä–æ–≤–∫—É –∫–æ–Ω—Å–æ–ª–∏
chcp

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å UTF-8 –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
chcp 65001

# –ü—Ä–æ—Å–º–æ—Ç—Ä Git –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
git config --list

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è PowerShell
Get-Content $PROFILE

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è PowerShell
notepad $PROFILE
```

## –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π Python –≤ Windows

### –ü—Ä–æ–±–ª–µ–º–∞ —Å Unicode-—Å–∏–º–≤–æ–ª–∞–º–∏ –≤ —Ç–µ—Å—Ç–∞—Ö

–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ Python —Å–∫—Ä–∏–ø—Ç–æ–≤ –≤ Windows PowerShell –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –æ—à–∏–±–∫–∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –ø—Ä–∏ –≤—ã–≤–æ–¥–µ Unicode-—Å–∏–º–≤–æ–ª–æ–≤ (—ç–º–æ–¥–∑–∏):

```
UnicodeEncodeError: 'charmap' codec can't encode character '\u2705' in position 0: character maps to <undefined>
```

### –ü—Ä–∏—á–∏–Ω–∞

Python –∏—Å–ø–æ–ª—å–∑—É–µ—Ç UTF-8 –∫–∞–∫ default encoding, –Ω–æ stdout/stderr –∏—Å–ø–æ–ª—å–∑—É—é—Ç cp1251 (Windows-1251), —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–∞–º –ø—Ä–∏ –≤—ã–≤–æ–¥–µ Unicode-—Å–∏–º–≤–æ–ª–æ–≤.

### –†–µ—à–µ–Ω–∏–µ

#### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ PowerShell –ø—Ä–æ—Ñ–∏–ª—å

–í `Microsoft.PowerShell_profile.ps1` —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- `PYTHONIOENCODING=utf-8` - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è UTF-8 –¥–ª—è stdin/stdout/stderr
- `PYTHONUTF8=1` - –∞–∫—Ç–∏–≤–∞—Ü–∏—è UTF-8 —Ä–µ–∂–∏–º–∞ (PEP 540)

#### 2. –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏

```powershell
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
$env:PYTHONIOENCODING = 'utf-8'
$env:PYTHONUTF8 = '1'

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Å–æ–ª–∏
[Console]::OutputEncoding = [System.Text.Encoding]::UTF8
[Console]::InputEncoding = [System.Text.Encoding]::UTF8
chcp 65001
```

#### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ setup-—Å–∫—Ä–∏–ø—Ç–∞

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É:
```powershell
.\tests\setup_test_environment.ps1 -Global
```

#### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ safe_print() –≤ –∫–æ–¥–µ

–í —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `safe_print()` –≤–º–µ—Å—Ç–æ `print()`:

```python
from tests.test_utils import safe_print

# –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—ã–≤–æ–¥ —Å fallback
safe_print("‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω", fallback_text="[OK] –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω")

# –û–±—ã—á–Ω—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—ã–≤–æ–¥
safe_print("–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä! üöÄ")
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –∫–æ–¥–∏—Ä–æ–≤–∫–∏:
```powershell
python tests\test_encoding.py
```

### –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `safe_print()`** –≤ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö
2. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Ç–µ—Å—Ç–æ–≤
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ setup-—Å–∫—Ä–∏–ø—Ç** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## –°—Å—ã–ª–∫–∏

- [Git UTF-8 Configuration](https://git-scm.com/docs/git-config#Documentation/git-config.txt-i18ncommitEncoding)
- [PowerShell Encoding](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_character_encoding)
- [Windows Console Code Pages](https://docs.microsoft.com/en-us/windows/console/console-virtual-terminal-sequences)
- [Python UTF-8 Mode](https://docs.python.org/3/using/cmdline.html#envvar-PYTHONUTF8)

