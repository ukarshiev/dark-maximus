# üîí –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL –¥–ª—è Dark Maximus

> –û–±–Ω–æ–≤–ª–µ–Ω–æ: 17.01.2025  
> –í–µ—Ä—Å–∏—è: 2.71.0

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ SSL](#-–±—ã—Å—Ç—Ä–∞—è-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-ssl)
- [–ü–æ—á–µ–º—É –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π SSL –≤ 3x-ui](#-–ø–æ—á–µ–º—É-–Ω–µ-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å-–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π-ssl-–≤-3x-ui)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ SSL](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-ssl)
- [–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#-–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
- [–†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#-—Ä—É—á–Ω–∞—è-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ 3x-ui](#Ô∏è-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-3x-ui)
- [–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã](#-–ø—Ä–æ–≤–µ—Ä–∫–∞-—Ä–∞–±–æ—Ç—ã)
- [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#-—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)
- [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ SSL](#-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-ssl)
- [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ SSL

### –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL

```bash
curl -sSL https://raw.githubusercontent.com/ukarshiev/dark-maximus/main/ssl-install.sh | sudo bash
```

**–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç DNS –∑–∞–ø–∏—Å–∏
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç Certbot
- –ü–æ–ª—É—á–∏—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è –≤—Å–µ—Ö –¥–æ–º–µ–Ω–æ–≤
- –ù–∞—Å—Ç—Ä–æ–∏—Ç Nginx –∫–∞–∫ reverse proxy
- –ù–∞—Å—Ç—Ä–æ–∏—Ç –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- –°–æ–∑–¥–∞—Å—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è production

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ 3x-ui –ø–æ—Å–ª–µ SSL

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL –≤ –ø–∞–Ω–µ–ª–∏ 3x-ui —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:

- **Listen IP**: `127.0.0.1` ‚ö†Ô∏è
- **Port**: `2053`
- **TLS/SSL**: `‚ùå –û–¢–ö–õ–Æ–ß–ò–¢–¨` ‚ö†Ô∏è

## ‚ö†Ô∏è –ü–æ—á–µ–º—É –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π SSL –≤ 3x-ui

**–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º SSL –≤ 3x-ui!**

### –ü—Ä–æ–±–ª–µ–º—ã –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ SSL:

1. **–ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** - —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —á–∞—Å—Ç–æ "—Å–ª–µ—Ç–∞—é—Ç" —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è
2. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏** - —Ç—Ä—É–¥–Ω–æ –ø–æ–Ω—è—Ç—å –ø—Ä–∏—á–∏–Ω—É –ø—Ä–æ–±–ª–µ–º
3. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º** - certbot –º–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –º–µ—Ö–∞–Ω–∏–∑–º–æ–º 3x-ui
4. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** - –Ω–µ—Ç –≥–∏–±–∫–æ—Å—Ç–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
5. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º** - —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ SSL

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: Nginx + Let's Encrypt

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     HTTPS     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    HTTP     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí‚îÇ   Nginx   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí‚îÇ   3x-ui    ‚îÇ
‚îÇ         ‚îÇ   (SSL/TLS)    ‚îÇ (–ø–æ—Ä—Ç 443)‚îÇ (localhost) ‚îÇ (–ø–æ—Ä—Ç 2053)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                 ‚Üì
                           Let's Encrypt
                           SSL Certificates
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:

‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ SSL –±–µ–∑ —Å–±–æ–µ–≤  
‚úÖ **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å –ª—É—á—à–∏–º–∏ –ø—Ä–∞–∫—Ç–∏–∫–∞–º–∏  
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–æ–º–µ–Ω–æ–≤  
‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ SSL  

## üõ†Ô∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ssl-install.sh

```bash
# –° –¥–æ–º–µ–Ω–æ–º –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç
curl -sSL https://raw.githubusercontent.com/ukarshiev/dark-maximus/main/ssl-install.sh | sudo bash -s -- example.com

# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
sudo ./ssl-install.sh example.com
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç/—Å–æ–∑–¥–∞–µ—Ç HTTP nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
2. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç/–∑–∞–ø—É—Å–∫–∞–µ—Ç Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç DNS –∑–∞–ø–∏—Å–∏
4. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Certbot
5. –ü–æ–ª—É—á–∞–µ—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
6. –°–æ–∑–¥–∞–µ—Ç HTTPS nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞–º–∏
7. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

### –†–µ–∑—É–ª—å—Ç–∞—Ç:

- –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ HTTPS
- HTTP –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç—Å—è –Ω–∞ HTTPS
- –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üîß –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot

```bash
# Ubuntu/Debian
sudo apt update
sudo apt install -y certbot python3-certbot-nginx

# CentOS/RHEL
sudo yum install -y certbot python3-certbot-nginx
```

### –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

```bash
# –î–ª—è –¥–æ–º–µ–Ω–∞ –±–æ—Ç–∞
sudo certbot certonly --nginx \
  -d panel.example.com \
  -d docs.example.com \
  -d help.example.com \
  --email your-email@example.com \
  --agree-tos \
  --non-interactive
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Dark Maximus:**

```nginx
# /etc/nginx/sites-available/dark-maximus-ssl

# –û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name panel.example.com;

    # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
    ssl_certificate /etc/letsencrypt/live/panel.example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/panel.example.com/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;

    # –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;

    location / {
        proxy_pass http://127.0.0.1:1488;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}

# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name docs.example.com;

    ssl_certificate /etc/letsencrypt/live/docs.example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/docs.example.com/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;

    location / {
        proxy_pass http://127.0.0.1:3001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}

# –ê–¥–º–∏–Ω—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name help.example.com;

    ssl_certificate /etc/letsencrypt/live/help.example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/help.example.com/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;

    location / {
        proxy_pass http://127.0.0.1:3002;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}

# –†–µ–¥–∏—Ä–µ–∫—Ç —Å HTTP –Ω–∞ HTTPS
server {
    listen 80;
    listen [::]:80;
    server_name panel.example.com docs.example.com help.example.com;
    return 301 https://$server_name$request_uri;
}
```

### –®–∞–≥ 4: –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫—É—é —Å—Å—ã–ª–∫—É
sudo ln -sf /etc/nginx/sites-available/dark-maximus-ssl /etc/nginx/sites-enabled/

# –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—É—é HTTP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo rm -f /etc/nginx/sites-enabled/dark-maximus

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ Nginx
sudo systemctl reload nginx
```

### –®–∞–≥ 5: –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

```bash
# –î–æ–±–∞–≤—å—Ç–µ –∑–∞–¥–∞—á—É –≤ cron
sudo crontab -e

# –î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 12:00)
0 12 * * * /usr/bin/certbot renew --quiet --post-hook "systemctl reload nginx"
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ 3x-ui

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL –≤ Nginx, **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ 3x-ui –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–µ–∑ SSL:**

1. –ó–∞–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å 3x-ui: `https://panel.example.com`

2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞–Ω–µ–ª–∏** (Settings)

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
   - **Listen IP**: `127.0.0.1` ‚ö†Ô∏è
   - **Port**: `2053` (–∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç)
   - **Enable TLS/SSL**: `‚ùå –û–¢–ö–õ–Æ–ß–ò–¢–¨` ‚ö†Ô∏è

4. –ù–∞–∂–º–∏—Ç–µ **Save** –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ 3x-ui

### ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ:

```diff
- ‚ùå –ù–ï –≤–∫–ª—é—á–∞–π—Ç–µ SSL –≤ 3x-ui
- ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ 0.0.0.0 –≤ Listen IP
+ ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ 127.0.0.1 (—Ç–æ–ª—å–∫–æ localhost)
+ ‚úÖ –û—Ç–∫–ª—é—á–∏—Ç–µ TLS/SSL –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö 3x-ui
+ ‚úÖ SSL –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç Nginx
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

```bash
# –°–ø–∏—Å–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
sudo certbot certificates

# –¢–µ—Å—Ç –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (dry run)
sudo certbot renew --dry-run

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
echo | openssl s_client -servername panel.example.com -connect panel.example.com:443 2>/dev/null | openssl x509 -noout -dates
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx

```bash
# –¢–µ—Å—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo nginx -t

# –°—Ç–∞—Ç—É—Å Nginx
sudo systemctl status nginx

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
sudo tail -f /var/log/nginx/error.log
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ—Ç–∞
curl -I https://panel.example.com

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
curl -I https://docs.example.com
curl -I https://help.example.com

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ —Å HTTP –Ω–∞ HTTPS
curl -I http://panel.example.com
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏ –∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º
sudo ls -la /etc/letsencrypt/live/

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Nginx
sudo systemctl restart nginx
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ "connection refused" –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ –ø–∞–Ω–µ–ª–∏

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ 3x-ui –∑–∞–ø—É—â–µ–Ω –Ω–∞ localhost
sudo netstat -tlnp | grep 2053

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ 3x-ui (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 127.0.0.1:2053)
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–¥–∞—á–∏ cron
sudo crontab -l

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo certbot renew --force-renewal

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
sudo tail -f /var/log/letsencrypt/letsencrypt.log
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Too Many Failed Authorizations"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# Let's Encrypt –∏–º–µ–µ—Ç –ª–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
# –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1 —á–∞—Å –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–ø—ã—Ç–∫–æ–π

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ staging —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤
sudo certbot certonly --staging \
  -d panel.example.com \
  --nginx
```

### –ü—Ä–æ–±–ª–µ–º–∞: "nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"

**–†–µ—à–µ–Ω–∏–µ**: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–∞—á–∞–ª–∞ `install.sh`

### –ü—Ä–æ–±–ª–µ–º–∞: "–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—â–µ–Ω—ã"

**–†–µ—à–µ–Ω–∏–µ**: `ssl-install.sh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç –∏—Ö

### –ü—Ä–æ–±–ª–µ–º–∞: "DNS –∑–∞–ø–∏—Å–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã"

**–†–µ—à–µ–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ A-–∑–∞–ø–∏—Å–∏ –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤ –Ω–∞ IP —Å–µ—Ä–≤–µ—Ä–∞

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ SSL

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

–°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:

```bash
# /usr/local/bin/check-ssl.sh
#!/bin/bash

DOMAINS=("panel.example.com" "docs.example.com" "help.example.com")

for DOMAIN in "${DOMAINS[@]}"; do
    DAYS_BEFORE_EXPIRY=$(echo | openssl s_client -servername $DOMAIN -connect $DOMAIN:443 2>/dev/null | openssl x509 -noout -checkend 604800)
    
    if [ $? -eq 0 ]; then
        echo "‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è $DOMAIN –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω"
    else
        echo "‚ö†Ô∏è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è $DOMAIN –∏—Å—Ç–µ–∫–∞–µ—Ç –º–µ–Ω–µ–µ —á–µ–º —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π!"
    fi
done
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x /usr/local/bin/check-ssl.sh

# –î–æ–±–∞–≤—å—Ç–µ –≤ cron (–ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å)
0 9 * * * /usr/local/bin/check-ssl.sh
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL –¥–ª—è Nginx

```nginx
# –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ SSL –ø—Ä–æ—Ç–æ–∫–æ–ª—ã
ssl_protocols TLSv1.2 TLSv1.3;

# –°–∏–ª—å–Ω—ã–µ —à–∏—Ñ—Ä—ã
ssl_ciphers 'ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384';

# –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —à–∏—Ñ—Ä—ã
ssl_prefer_server_ciphers on;

# HSTS (HTTP Strict Transport Security)
add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;

# –ó–∞—â–∏—Ç–∞ –æ—Ç clickjacking
add_header X-Frame-Options "SAMEORIGIN" always;

# –ó–∞—â–∏—Ç–∞ –æ—Ç MIME-sniffing
add_header X-Content-Type-Options "nosniff" always;

# XSS Protection
add_header X-XSS-Protection "1; mode=block" always;

# OCSP Stapling
ssl_stapling on;
ssl_stapling_verify on;
```

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
cd /opt/dark-maximus && docker compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
cd /opt/dark-maximus && docker compose logs -f

# –ü—Ä–æ–≤–µ—Ä–∫–∞ nginx
nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ nginx
systemctl restart nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
certbot certificates

# –¢–µ—Å—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è SSL
certbot renew --dry-run
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Let's Encrypt –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://letsencrypt.org/docs/)
- [Certbot –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://certbot.eff.org/docs/)
- [Nginx SSL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](https://nginx.org/en/docs/http/configuring_https_servers.html)
- [Mozilla SSL Configuration Generator](https://ssl-config.mozilla.org/)

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `/var/log/nginx/error.log` –∏ `/var/log/letsencrypt/letsencrypt.log`
2. –°–æ–∑–¥–∞–π—Ç–µ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏: [GitHub Issues](https://github.com/ukarshiev/dark-maximus/issues)
3. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ Telegram: [@ukarshiev](https://t.me/ukarshiev)

---

*–ü–æ–º–Ω–∏—Ç–µ: –Ω–∞–¥–µ–∂–Ω—ã–π SSL - –æ—Å–Ω–æ–≤–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤–∞—à–µ–≥–æ VPN-—Å–µ—Ä–≤–∏—Å–∞!*
