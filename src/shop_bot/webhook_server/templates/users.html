{% extends "base.html" %} {% block title %}–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏{% endblock
%} {% block content %}

<h1>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h1>

<section class="settings-section">
	<div style="overflow-x: auto">
		<table class="users-table">
			<thead>
				<tr>
					<th>Telegram ID</th>
					<th>Username</th>
					<th>–°—Ç–∞—Ç—É—Å</th>
					<th>–ê–∫—Ç–∏–≤–Ω—ã–µ –∫–ª—é—á–∏</th>
					<th>–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</th>
					<th class="actions-cell">–î–µ–π—Å—Ç–≤–∏—è</th>
				</tr>
			</thead>
			<tbody>
				{% for user in users %}
				<tr class="user-row">
					<td data-field="telegram_id" data-original="{{ user.telegram_id }}">
						<div class="cell-inline">
							<span>{{ hidden_mode and '***' or user.telegram_id }}</span>
							<div class="cell-actions">
								<button class="modal-action-btn" onclick="openUserModal({{ user.telegram_id }}, '{{ user.username or 'N/A' }}', {{ user.is_banned|lower }}, {{ user.user_keys|length if user.user_keys else 0 }})" title="–û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É">üîç</button>
							</div>
						</div>
					</td>
					<td data-field="username" data-original="@{{ user.username or 'N/A' }}">
						<div class="cell-inline">
							<span class="username-text">{{ hidden_mode and '@***' or ('@' ~ (user.username or 'N/A')) }}</span>
							<div class="cell-actions">
								<button class="modal-action-btn" onclick="openTelegramProfileFromTable('{{ user.username or 'N/A' }}')" title="–ü–µ—Ä–µ–π—Ç–∏ –≤ Telegram">üîó</button>
								<button class="modal-action-btn" onclick="copyUsernameFromTable('{{ user.username or 'N/A' }}')" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å username">üìã</button>
							</div>
						</div>
					</td>
					<td>
						{% if user.is_banned %}
						<span class="status-badge status-banned">–ó–∞–±–∞–Ω–µ–Ω</span>
						{% else %}
						<span class="status-badge status-active">–ê–∫—Ç–∏–≤–µ–Ω</span>
						{% endif %}
					</td>
					<td>
						{% if user.user_keys %} {{ user.user_keys | length }} —à—Ç. {% else %}
						0 {% endif %}
					</td>
					<td data-field="earned" class="user-earned" data-user-id="{{ user.telegram_id }}">{{ hidden_mode and '*** RUB' or '–ó–∞–≥—Ä—É–∑–∫–∞...' }}</td>
					<td class="actions-cell">
						{% if user.is_banned %}
						<form
							action="{{ url_for('unban_user_route', user_id=user.telegram_id) }}"
							method="post"
						>
							<button type="submit" class="button button-start button-small">
								–†–∞–∑–±–∞–Ω–∏—Ç—å
							</button>
						</form>
						{% else %}
						<form
							action="{{ url_for('ban_user_route', user_id=user.telegram_id) }}"
							method="post"
							data-confirm="–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–±–∞–Ω–∏—Ç—å —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è? –û–Ω –Ω–µ —Å–º–æ–∂–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –±–æ—Ç–æ–º."
						>
							<button type="submit" class="button button-warning button-small">
								–ë–∞–Ω
							</button>
						</form>
						{% endif %} {% if user.user_keys %}
						<form
							action="{{ url_for('revoke_keys_route', user_id=user.telegram_id) }}"
							method="post"
							data-confirm="–í–ù–ò–ú–ê–ù–ò–ï! –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ —É–¥–∞–ª–∏—Ç –í–°–ï –∫–ª—é—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Å–µ—Ä–≤–µ—Ä–æ–≤. –í—ã —É–≤–µ—Ä–µ–Ω—ã?"
						>
							<button type="submit" class="button button-danger button-small">
								–û—Ç–æ–∑–≤–∞—Ç—å
							</button>
						</form>
						{% endif %}
					</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
</section>

{% endblock %}
