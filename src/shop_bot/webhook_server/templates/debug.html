{% extends "base.html" %} 
{% block title %}Отладка{% endblock %}
{% block header_title %}Отладка{% endblock %}
{% block content %}

<!-- Навигация по вкладкам -->
<div class="tab-navigation">
	<a href="{{ url_for('versions_page_new') }}" class="nav-button" title="История изменений">
		<i class="fas fa-history"></i>
		История изменений
	</a>
	<a href="{{ url_for('demo_page') }}" class="nav-button" title="Демонстрация элементов интерфейса">
		<i class="fas fa-palette"></i>
		Демо страница
	</a>
	<a href="{{ url_for('debug_page') }}" class="nav-button active" title="Отладочные настройки">
		<i class="fas fa-bug"></i>
		Отладка
	</a>
</div>

<section class="settings-section">
	<h2>Отладочные настройки</h2>
	
	<div style="margin-bottom: 20px;">
		<h3>Статус Бота</h3>
		{% if bot_status.is_running %}
		<p style="color: var(--success-color)">Статус: <strong>ON</strong></p>
		{% else %}
		<p style="color: #dc3545">Статус: <strong>OFF</strong></p>
		{% endif %}
	</div>

	<div style="margin-bottom: 20px;">
		<h3>Управление</h3>
		<div style="display: flex; gap: 15px; flex-wrap: wrap;">
			<form action="{{ url_for('start_shop_bot_route') }}" method="post" style="display: inline;">
				<button type="submit" class="button button-start" data-size="md" title="Запустить бота">
					<i class="fas fa-play"></i>
					ЗАПУСТИТЬ
				</button>
			</form>
			
			<form action="{{ url_for('stop_shop_bot_route') }}" method="post" style="display: inline;">
				<button type="submit" class="button button-stop" data-size="md" title="Остановить бота">
					<i class="fas fa-stop"></i>
					ОСТАНОВИТЬ
				</button>
			</form>
		</div>
	</div>

	<div style="margin-bottom: 20px;">
		<h3>Сообщения от сервера:</h3>
		{% with messages = get_flashed_messages(with_categories=true) %}
			{% if messages %}
				{% for category, message in messages %}
					<div class="flash flash-{{ category }}">
						<i class="fas fa-info-circle"></i>
						{{ message }}
					</div>
				{% endfor %}
			{% else %}
				<p>Сообщений нет.</p>
			{% endif %}
		{% endwith %}
	</div>
</section>

{% endblock %}
